(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{13673:()=>{},14190:(e,t,n)=>{"use strict";n.d(t,{Pg:()=>m,ZD:()=>d,l$:()=>c,wL:()=>u,xO:()=>o});let r="blog.audioProgress",a="blog:audio-progress-updated";function i(){return window}function l(){let e=i();if(!e)return{};try{let t=e.localStorage.getItem(r);if(!t)return{};let n=JSON.parse(t);return"object"==typeof n&&null!==n?n:{}}catch(e){return console.warn("Failed to parse audio progress from storage",e),{}}}function s(e){let t=i();if(t)try{t.localStorage.setItem(r,JSON.stringify(e))}catch(e){console.warn("Failed to persist audio progress",e)}}function o(e,t,n){let r=i();if(!r)return;let o=l();o[e]={currentTime:t,duration:n,lastPlayed:Date.now()},s(o),r.dispatchEvent(new CustomEvent(a,{detail:{src:e,currentTime:t,duration:n}}))}function u(e){return l()[e]||null}function c(e){let t=i();if(!t)return;let n=l();delete n[e],s(n),t.dispatchEvent(new CustomEvent(a,{detail:{src:e,currentTime:0,duration:0}}))}function d(e){let t=i();if(!t)return()=>void 0;let n=t=>{e(t.detail)};return t.addEventListener(a,n),()=>{t.removeEventListener(a,n)}}function m(){if(!i())return;let e=l(),t=Date.now()-2592e6,n=!1;Object.keys(e).forEach(r=>{e[r].lastPlayed<t&&(delete e[r],n=!0)}),n&&s(e)}},33572:(e,t,n)=>{"use strict";n.d(t,{FloatingAudioProvider:()=>l,X:()=>s});var r=n(95155),a=n(12115);let i=(0,a.createContext)(null);function l(e){let{children:t}=e,[n,l]=(0,a.useState)(null);return(0,r.jsx)(i.Provider,{value:{audioState:n,setAudioState:l},children:t})}function s(){let e=(0,a.useContext)(i);if(!e)throw Error("useFloatingAudioState must be used within FloatingAudioProvider");return e}},37051:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,4635,23)),Promise.resolve().then(n.t.bind(n,58615,23)),Promise.resolve().then(n.t.bind(n,21887,23)),Promise.resolve().then(n.t.bind(n,13673,23)),Promise.resolve().then(n.bind(n,87435)),Promise.resolve().then(n.bind(n,79081)),Promise.resolve().then(n.bind(n,80989)),Promise.resolve().then(n.bind(n,51458)),Promise.resolve().then(n.bind(n,33572))},51458:(e,t,n)=>{"use strict";n.d(t,{ThemeProvider:()=>i});var r=n(95155),a=n(5379);function i(e){let{children:t,...n}=e;return(0,r.jsx)(a.N,{attribute:"class",defaultTheme:"system",enableColorScheme:!0,enableSystem:!0,...n,children:t})}},64269:(e,t,n)=>{"use strict";n.d(t,{Y:()=>l,cn:()=>i,r:()=>s});var r=n(2821),a=n(75889);function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,a.QP)((0,r.$)(t))}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",r="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(n,{year:"numeric",month:"short",day:"numeric",...t}).format(r)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="https://vinay.stealthbit.in",n=new URL(t||"http://localhost:3000");return new URL(e,n).toString()}},79081:(e,t,n)=>{"use strict";n.d(t,{GlobalAudioProvider:()=>s,o:()=>u,p:()=>o});var r=n(95155),a=n(12115),i=n(14190);let l=(0,a.createContext)(null);function s(e){let{children:t}=e,n=(0,a.useRef)(null),s=(0,a.useRef)(null),o=(0,a.useRef)(0),[u,c]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(0),[v,p]=(0,a.useState)(0);(0,a.useEffect)(()=>{s.current=u},[u]),(0,a.useEffect)(()=>{let e=new Audio;e.preload="metadata",n.current=e;let t=()=>m(!0),r=()=>m(!1),a=()=>m(!1),l=()=>{f(e.currentTime);let t=s.current,n=Date.now();t&&e.currentTime>0&&n-o.current>=2e3&&((0,i.xO)(t.src,e.currentTime,e.duration),o.current=n)},u=()=>{if(Number.isFinite(e.duration)){p(e.duration);let t=s.current;if(t){let n=(0,i.wL)(t.src);n&&n.currentTime>5&&n.currentTime<e.duration-5&&(e.currentTime=n.currentTime,f(n.currentTime))}}},c=e=>{console.warn("Audio playback error:",e),m(!1)};return e.addEventListener("play",t),e.addEventListener("pause",r),e.addEventListener("ended",a),e.addEventListener("timeupdate",l),e.addEventListener("loadedmetadata",u),e.addEventListener("error",c),(0,i.Pg)(),()=>{if(e.removeEventListener("play",t),e.removeEventListener("pause",r),e.removeEventListener("ended",a),e.removeEventListener("timeupdate",l),e.removeEventListener("loadedmetadata",u),e.removeEventListener("error",c),e.currentTime>0&&e.src){let t=e.src;(0,i.xO)(t,e.currentTime,e.duration)}e.pause(),e.src=""}},[]);let x=(0,a.useCallback)(e=>{let t=n.current;if(t)if((null==u?void 0:u.src)!==e.src){t.src=e.src,c(e),f(0),p(0),o.current=0;let n=()=>{t.play().catch(e=>{console.warn("Unable to start audio playback:",e)}),t.removeEventListener("canplay",n)};t.addEventListener("canplay",n,{once:!0}),t.load()}else t.play().catch(e=>{console.warn("Unable to start audio playback:",e)})},[null==u?void 0:u.src]),b=(0,a.useCallback)(()=>{let e=n.current;e&&e.pause()},[]),g=(0,a.useCallback)(()=>{d?b():u&&x(u)},[d,u,b,x]),w=(0,a.useCallback)(e=>{let t=n.current;t&&(t.currentTime=e,f(e))},[]),y=(0,a.useCallback)(e=>(null==u?void 0:u.src)===e,[null==u?void 0:u.src]);return(0,r.jsx)(l.Provider,{value:{currentAudio:u,isPlaying:d,currentTime:h,duration:v,progressPercent:v>0?h/v*100:0,play:x,pause:b,toggle:g,seek:w,isCurrentAudio:y},children:t})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useGlobalAudio must be used within GlobalAudioProvider");return e}function u(){return(0,a.useContext)(l)}},80989:(e,t,n)=>{"use strict";n.d(t,{B:()=>s,SearchSheetProvider:()=>l});var r=n(95155),a=n(12115);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[n,l]=(0,a.useState)(!1);return(0,r.jsx)(i.Provider,{value:{isOpen:n,openSearch:()=>l(!0),closeSearch:()=>l(!1)},children:t})}function s(){let e=(0,a.useContext)(i);if(!e)throw Error("useSearchSheet must be used within SearchSheetProvider");return e}},87435:(e,t,n)=>{"use strict";n.d(t,{FloatingNav:()=>C});var r=n(95155),a=n(12115),i=n(52619),l=n.n(i),s=n(71408),o=n(34486),u=n(65993),c=n(20508),d=n(86651),m=n(20562),h=n(53511),f=n(85921),v=n(65229),p=n(9540),x=n(59427),b=n(37494),g=n(5379),w=n(83101),y=n(64269);let j=(0,w.F)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60",{variants:{variant:{default:"bg-accent text-accent-foreground hover:bg-accent/90",outline:"border border-border bg-background hover:bg-muted",ghost:"hover:bg-muted/60"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-6",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=(0,a.forwardRef)((e,t)=>{let{className:n,variant:a,size:i,...l}=e;return(0,r.jsx)("button",{ref:t,className:(0,y.cn)(j({variant:a,size:i}),n),...l})});function E(e){let{className:t}=e,{resolvedTheme:n,setTheme:i}=(0,g.D)(),[l,s]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{s(!0)},[]),(0,r.jsxs)(N,{type:"button",variant:"outline",size:"sm",onClick:()=>{i("dark"===n?"light":"dark")},className:(0,y.cn)("pointer-events-auto relative",t),"aria-label":"Toggle theme",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0","aria-hidden":!0}),(0,r.jsx)(b.A,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100","aria-hidden":!0}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle theme"}),l?(0,r.jsx)("span",{className:"ml-6 text-xs capitalize",children:null!=n?n:"system"}):null]})}N.displayName="Button";var P=n(80989),k=n(20063),S=n(33572),L=n(79081);let A=[{href:"/",label:"Home",icon:u.A},{href:"/about",label:"About",icon:c.A}];function C(){var e,t,n,i,u,c,x,b,g,w;let{openSearch:y}=(0,P.B)(),{audioState:j}=(0,S.X)(),N=(0,L.o)(),[C,T]=(0,a.useState)(!1),[O,D]=(0,a.useState)(!1),[F,M]=(0,a.useState)(!1),[R,_]=(0,a.useState)(!1),[z,U]=(0,a.useState)(!1),I=(0,k.usePathname)(),B="/"===I,G=I.startsWith("/posts/"),J=null!=(i=null!=(n=null==j?void 0:j.isPlaying)?n:null==N?void 0:N.isPlaying)&&i,V=null!=(c=null!=(u=null==j?void 0:j.title)?u:null==N||null==(e=N.currentAudio)?void 0:e.title)?c:"",X=null!=(b=null!=(x=null==j?void 0:j.displayDuration)?x:null==N||null==(t=N.currentAudio)?void 0:t.displayDuration)?b:null,Y=j?j.currentTime:null!=(g=null==N?void 0:N.currentTime)?g:0,$=j?j.progressPercent:null!=(w=null==N?void 0:N.progressPercent)?w:0,q=!!((null==N?void 0:N.currentAudio)&&(null==N?void 0:N.isPlaying)||G&&j&&(!j.isInView||j.isPlaying));return(0,a.useEffect)(()=>{function e(){U(window.scrollY>300)}return e(),window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,a.useEffect)(()=>{if("function"!=typeof window.matchMedia)return;let e=window.matchMedia("(hover: hover) and (pointer: fine)"),t=e=>{_(e.matches)};return(t(e),"function"==typeof e.addEventListener)?(e.addEventListener("change",t),()=>e.removeEventListener("change",t)):(e.addListener(t),()=>e.removeListener(t))},[]),(0,a.useEffect)(()=>{R||(D(!1),T(!1))},[R]),(0,a.useEffect)(()=>{if(!C||O)return;let e=()=>T(!1),t=window.setTimeout(()=>{window.addEventListener("click",e,{once:!0})},0);return()=>{window.clearTimeout(t),window.removeEventListener("click",e)}},[C,O]),(0,r.jsx)("div",{className:"pointer-events-none fixed bottom-6 right-6 z-50 flex flex-col items-end gap-3 sm:bottom-10 sm:right-10",children:(0,r.jsxs)("div",{className:"pointer-events-auto flex flex-col items-end gap-3",onMouseEnter:()=>{R&&(M(!0),T(!0))},onMouseLeave:()=>{R&&(M(!1),O||T(!1))},children:[(0,r.jsx)(s.N,{children:C&&(0,r.jsxs)(o.P.nav,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:240,damping:20},className:"flex flex-col items-end gap-2",children:[A.map(e=>(0,r.jsxs)(l(),{href:e.href,className:"group flex items-center gap-2 rounded-full bg-background/90 px-4 py-2 text-sm font-medium shadow-md backdrop-blur transition hover:bg-muted",children:[(0,r.jsx)(e.icon,{className:"h-4 w-4 text-accent","aria-hidden":!0}),(0,r.jsx)("span",{children:e.label})]},e.href)),B&&(0,r.jsxs)("button",{type:"button",onClick:()=>{y(),T(!1)},className:"md:hidden flex items-center gap-2 rounded-full bg-background/90 px-4 py-2 text-sm font-medium shadow-md backdrop-blur transition hover:bg-muted","aria-label":"Open search",children:[(0,r.jsx)(d.A,{className:"h-4 w-4 text-accent","aria-hidden":!0}),(0,r.jsx)("span",{children:"Search"})]}),(0,r.jsx)(E,{className:"justify-between"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[z&&(0,r.jsx)("button",{type:"button",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-background/90 shadow-lg backdrop-blur transition hover:bg-muted","aria-label":"Scroll to top",children:(0,r.jsx)(m.A,{className:"h-5 w-5","aria-hidden":!0})}),(0,r.jsxs)("div",{className:"pointer-events-auto flex items-center rounded-full bg-background/95 shadow-xl backdrop-blur-sm ring-1 ring-border/50 floating-player-glow",children:[(0,r.jsx)(s.N,{children:q&&(0,r.jsxs)(o.P.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},exit:{width:0,opacity:0},transition:{duration:.2,ease:"easeOut"},className:"flex items-center gap-1.5 overflow-hidden pl-2.5 pr-1.5",children:[(0,r.jsxs)("div",{className:"flex min-w-0 max-w-[100px] flex-col gap-0.5 py-1.5 sm:max-w-[130px]",children:[(0,r.jsx)("div",{className:"relative overflow-hidden",role:"status","aria-live":"off","aria-label":"Now playing",children:V.length>20?(0,r.jsxs)("div",{className:"flex animate-marquee gap-8",children:[(0,r.jsx)("span",{className:"whitespace-nowrap text-[9px] font-medium text-foreground",children:V}),(0,r.jsx)("span",{className:"whitespace-nowrap text-[9px] font-medium text-foreground","aria-hidden":"true",children:V})]}):(0,r.jsx)("span",{className:"whitespace-nowrap text-[9px] font-medium text-foreground",children:V})}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-[8px] text-muted-foreground",children:[(0,r.jsx)("span",{className:"tabular-nums",children:function(e){let t=Math.max(0,Math.floor(e)),n=Math.floor(t/60);return"".concat(n,":").concat((t%60).toString().padStart(2,"0"))}(Y)}),(0,r.jsx)("div",{className:"relative h-0.5 flex-1 overflow-hidden rounded-full bg-border",children:(0,r.jsx)("div",{className:"h-full rounded-full bg-accent transition-all",style:{width:"".concat($,"%")}})}),(0,r.jsx)("span",{className:"tabular-nums",children:null!=X?X:"--:--"})]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e,t;return null!=(t=null==j||null==(e=j.onTogglePlayback)?void 0:e.call(j))?t:null==N?void 0:N.toggle()},"aria-label":J?"Pause narration":"Play narration",className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-accent text-white transition hover:bg-accent/90 focus-visible:outline-accent focus-visible:outline-2 focus-visible:outline-offset-2",children:J?(0,r.jsx)(h.A,{className:"h-4 w-4 transition","aria-hidden":!0}):(0,r.jsx)(f.A,{className:"h-4 w-4 transition","aria-hidden":!0})})]})}),(0,r.jsx)("button",{type:"button",onClick:()=>{R?D(e=>{let t=!e;return T(t||F),t}):T(e=>!e)},className:"flex h-14 w-14 shrink-0 items-center justify-center rounded-full bg-accent text-accent-foreground shadow-2xl transition hover:bg-accent/90","aria-label":R?O?"Close navigation":"Pin navigation":C?"Close navigation":"Open navigation",children:R?O?(0,r.jsx)(v.A,{className:"h-6 w-6","aria-hidden":!0}):(0,r.jsx)(p.A,{className:"h-6 w-6","aria-hidden":!0}):C?(0,r.jsx)(v.A,{className:"h-6 w-6","aria-hidden":!0}):(0,r.jsx)(p.A,{className:"h-6 w-6","aria-hidden":!0})})]})]})]})})}}},e=>{e.O(0,[4614,2201,8005,7750,9227,8441,1255,7358],()=>e(e.s=37051)),_N_E=e.O()}]);