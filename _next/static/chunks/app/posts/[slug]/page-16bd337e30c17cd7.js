(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5858],{5141:(e,t,r)=>{"use strict";r.d(t,{By:()=>c,m9:()=>o,uu:()=>u});let n="blog.readPosts",a="blog:read-updated";function i(){return window}function l(){let e=i();if(!e)return{};try{let t=e.localStorage.getItem(n);if(!t)return{};let r=JSON.parse(t);if(Array.isArray(r)){let e={};for(let t of r)"string"==typeof t&&(e[t]=!0);return s(e),e}if("object"==typeof r&&null!==r&&!Array.isArray(r))return r;return{}}catch(e){return console.warn("Failed to parse read posts from storage",e),{}}}function s(e){let t=i();if(t)try{t.localStorage.setItem(n,JSON.stringify(e))}catch(e){console.warn("Failed to persist read posts",e)}}function o(e){let t=i();if(!t)return;let r=l();r[e]||(r[e]=!0,s(r),t.dispatchEvent(new CustomEvent(a,{detail:{slug:e,read:!0}})))}function c(e){return!0===l()[e]}function u(e){let t=i();if(!t)return()=>void 0;let r=t=>{e(t.detail)};return t.addEventListener(a,r),()=>{t.removeEventListener(a,r)}}},6023:(e,t,r)=>{"use strict";r.d(t,{ShareButtons:()=>d});var n=r(95155),a=r(12115),i=r(17181),l=r(67333),s=r(71847);let o=(0,s.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),c=(0,s.A)("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);var u=r(64269);function d(e){let{slug:t,title:r,className:s}=e,d=(0,a.useMemo)(()=>(0,u.r)("/posts/".concat(t)),[t]),[m,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!m)return;let e=window.setTimeout(()=>h(!1),1800);return()=>window.clearTimeout(e)},[m]);let f=async()=>{try{var e;if(null==(e=navigator.clipboard)?void 0:e.writeText)await navigator.clipboard.writeText(d),h(!0);else{let e=document.createElement("textarea");e.value=d,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),h(!0)}}catch(e){console.error("Failed to copy link",e)}},b=async()=>{let e=navigator;if("function"==typeof e.share)try{await e.share({title:r,text:r,url:d});return}catch(e){console.warn("Native share failed",e)}await f()},v=(0,a.useCallback)(()=>{if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){let e="linkedin://shareArticle?url=".concat(encodeURIComponent(d)),t="https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(d));window.location.href=e,setTimeout(()=>{window.location.href=t},1500)}else{let e="https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(d)),t=window.open(e,"share-window","width=600,height=600,noopener,noreferrer");t&&(t.opener=null)}},[d]);return(0,n.jsxs)("div",{className:(0,u.cn)("flex flex-wrap items-center gap-3",s),children:[(0,n.jsxs)("span",{className:"flex items-center gap-2 text-xs uppercase tracking-[0.3em] text-muted-foreground",children:[(0,n.jsx)(i.A,{className:"h-4 w-4","aria-hidden":!0}),"Share"]}),(0,n.jsx)("button",{type:"button",onClick:b,className:"group flex h-10 w-10 items-center justify-center rounded-full border border-border transition hover:border-accent hover:bg-accent/10","aria-label":"Share with device dialog",children:(0,n.jsx)(i.A,{className:"h-4 w-4","aria-hidden":!0})}),(0,n.jsx)("button",{type:"button",onClick:v,className:"group flex h-10 w-10 items-center justify-center rounded-full border border-border transition group-hover:bg-[#0077B5] group-hover:text-white","aria-label":"Share on LinkedIn",children:(0,n.jsx)(l.A,{className:"h-4 w-4","aria-hidden":!0})}),(0,n.jsx)("button",{type:"button",onClick:f,className:(0,u.cn)("group flex h-10 w-10 items-center justify-center rounded-full border border-border transition hover:border-accent hover:bg-accent/10",m?"border-accent text-accent":""),"aria-label":"Copy link",children:m?(0,n.jsx)(o,{className:"h-4 w-4","aria-hidden":!0}):(0,n.jsx)(c,{className:"h-4 w-4","aria-hidden":!0})}),(0,n.jsx)("span",{className:(0,u.cn)("text-xs text-accent transition-opacity duration-150",m?"opacity-100":"opacity-0"),"aria-live":"polite",children:"Link copied"})]})}},7553:(e,t,r)=>{"use strict";r.d(t,{ReadingProgress:()=>i});var n=r(95155),a=r(12115);function i(){let[e,t]=(0,a.useState)(0);return(0,a.useEffect)(()=>{function e(){let{scrollTop:e,scrollHeight:r,clientHeight:n}=document.documentElement,a=r-n;t(Math.min(Math.max(a>0?e/a*100:0,0),100))}return e(),window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),(0,n.jsx)("div",{className:"pointer-events-none fixed top-0 left-0 z-40 h-1 w-full bg-transparent",children:(0,n.jsx)("div",{className:"h-full bg-accent transition-[width] duration-200",style:{width:"".concat(e,"%")},role:"presentation","aria-hidden":!0})})}},14190:(e,t,r)=>{"use strict";r.d(t,{Pg:()=>m,ZD:()=>d,l$:()=>u,wL:()=>c,xO:()=>o});let n="blog.audioProgress",a="blog:audio-progress-updated";function i(){return window}function l(){let e=i();if(!e)return{};try{let t=e.localStorage.getItem(n);if(!t)return{};let r=JSON.parse(t);return"object"==typeof r&&null!==r?r:{}}catch(e){return console.warn("Failed to parse audio progress from storage",e),{}}}function s(e){let t=i();if(t)try{t.localStorage.setItem(n,JSON.stringify(e))}catch(e){console.warn("Failed to persist audio progress",e)}}function o(e,t,r){let n=i();if(!n)return;let o=l();o[e]={currentTime:t,duration:r,lastPlayed:Date.now()},s(o),n.dispatchEvent(new CustomEvent(a,{detail:{src:e,currentTime:t,duration:r}}))}function c(e){return l()[e]||null}function u(e){let t=i();if(!t)return;let r=l();delete r[e],s(r),t.dispatchEvent(new CustomEvent(a,{detail:{src:e,currentTime:0,duration:0}}))}function d(e){let t=i();if(!t)return()=>void 0;let r=t=>{e(t.detail)};return t.addEventListener(a,r),()=>{t.removeEventListener(a,r)}}function m(){if(!i())return;let e=l(),t=Date.now()-2592e6,r=!1;Object.keys(e).forEach(n=>{e[n].lastPlayed<t&&(delete e[n],r=!0)}),r&&s(e)}},17181:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},19558:(e,t,r)=>{"use strict";r.d(t,{MarkPostRead:()=>i});var n=r(12115),a=r(5141);function i(e){let{slug:t}=e;return(0,n.useEffect)(()=>{(0,a.m9)(t)},[t]),null}},24121:(e,t,r)=>{"use strict";r.d(t,{MermaidDiagrams:()=>a});var n=r(12115);function a(){return(0,n.useEffect)(()=>{let e=!1,t=null,n=null,a=async()=>{var e;if(n)return n;t||(t=Promise.all([r.e(590),r.e(7485)]).then(r.bind(r,37485)));let a=await t;return n=null!=(e=a.default)?e:a},i=async()=>{let t=Array.from(document.querySelectorAll("[data-mermaid-diagram='true']"));if(!t.length)return;let r=await a();if(!e){r.initialize({startOnLoad:!1,theme:document.documentElement.classList.contains("dark")?"dark":"default",securityLevel:"loose"}),t.forEach(e=>{let t=e.dataset.definition;t&&(e.textContent=t)});try{await r.run({nodes:t,suppressErrors:!0})}catch(e){}}};(async()=>{Array.from(document.querySelectorAll("pre code.language-mermaid")).forEach(e=>{var t;let r=e.parentElement;if(!r||"true"===r.dataset.mermaidProcessed)return;let n=null==(t=e.textContent)?void 0:t.trim();if(!n)return;r.dataset.mermaidProcessed="true";let a=document.createElement("div");a.classList.add("mermaid"),a.dataset.mermaidDiagram="true",a.dataset.definition=n,a.textContent=n,r.insertAdjacentElement("afterend",a),r.style.display="none"}),await i()})();let l=new MutationObserver(e=>{e.some(e=>"attributes"===e.type&&"class"===e.attributeName)&&i()});l.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});let s=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{i()};return"function"==typeof s.addEventListener?s.addEventListener("change",o):"function"==typeof s.addListener&&s.addListener(o),()=>{e=!0,l.disconnect(),"function"==typeof s.removeEventListener?s.removeEventListener("change",o):"function"==typeof s.removeListener&&s.removeListener(o)}},[]),null}},33572:(e,t,r)=>{"use strict";r.d(t,{FloatingAudioProvider:()=>l,X:()=>s});var n=r(95155),a=r(12115);let i=(0,a.createContext)(null);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null);return(0,n.jsx)(i.Provider,{value:{audioState:r,setAudioState:l},children:t})}function s(){let e=(0,a.useContext)(i);if(!e)throw Error("useFloatingAudioState must be used within FloatingAudioProvider");return e}},48314:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},57990:(e,t,r)=>{"use strict";r.d(t,{ImageLightbox:()=>l});var n=r(95155),a=r(12115),i=r(65229);function l(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),s=(0,a.useRef)(null),o=(0,a.useRef)(null),c=(0,a.useCallback)((e,r)=>{var n;t(e),l(r),null==(n=s.current)||n.showModal()},[]),u=(0,a.useCallback)(()=>{var e;null==(e=s.current)||e.close()},[]);return(0,a.useEffect)(()=>{let e=e=>{let t=e.target;"IMG"===t.tagName&&t.closest(".prose")&&(e.preventDefault(),c(t.src,t.alt||"Image"))};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[c]),(0,a.useEffect)(()=>{document.querySelectorAll(".prose img").forEach(e=>{e.classList.add("cursor-zoom-in")})},[]),(0,n.jsx)("dialog",{ref:s,className:"lightbox-dialog",onClick:e=>{e.target===s.current&&u()},children:(0,n.jsxs)("div",{ref:o,className:"lightbox-inner",children:[(0,n.jsx)("button",{className:"lightbox-close",onClick:u,"aria-label":"Close lightbox",children:(0,n.jsx)(i.A,{className:"h-6 w-6"})}),(0,n.jsx)("div",{className:"lightbox-hint",children:(0,n.jsx)("span",{className:"text-xs text-white/60",children:"Click/Touch anywhere to close"})}),(0,n.jsxs)("div",{className:"lightbox-content",children:[e&&(0,n.jsx)("img",{src:e,alt:r,className:"lightbox-image"}),r&&"Image"!==r&&(0,n.jsx)("p",{className:"lightbox-caption",children:r})]})]})})}},64269:(e,t,r)=>{"use strict";r.d(t,{Y:()=>l,cn:()=>i,r:()=>s});var n=r(2821),a=r(75889);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",n="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(r,{year:"numeric",month:"short",day:"numeric",...t}).format(n)}function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="https://vinay.stealthbit.in",r=new URL(t||"http://localhost:3000");return new URL(e,r).toString()}},66078:(e,t,r)=>{"use strict";r.d(t,{PostAudioPlayer:()=>f});var n=r(95155),a=r(12115);let i=(0,r(71847).A)("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);var l=r(53511),s=r(85921),o=r(48314),c=r(64269),u=r(33572),d=r(79081),m=r(14190);function h(e){if(!Number.isFinite(null!=e?e:NaN))return"0:00";let t=Math.max(0,Math.floor(null!=e?e:0)),r=Math.floor(t/60);return"".concat(r,":").concat((t%60).toString().padStart(2,"0"))}function f(e){var t;let{postTitle:r,postSlug:f,audio:b,className:v}=e,p=!!(null==b?void 0:b.src),g=(0,a.useRef)(null),{setAudioState:x}=(0,u.X)(),w=(0,d.p)(),[y,k]=(0,a.useState)(!0),[N,j]=(0,a.useState)(null),E=p&&w.isCurrentAudio(b.src)&&w.isPlaying,L=p&&w.isCurrentAudio(b.src);(0,a.useEffect)(()=>{if(!g.current)return;let e=new IntersectionObserver(e=>{var t;let[r]=e;k(null!=(t=null==r?void 0:r.isIntersecting)&&t)});return e.observe(g.current),()=>e.disconnect()},[]);let C=(0,a.useCallback)(()=>{p&&b&&(L?w.toggle():w.play({src:b.src,title:r,displayDuration:b.duration,postSlug:f}))},[p,b,r,f,L,w]),A=(0,a.useCallback)(()=>{p&&b&&((0,m.l$)(b.src),j(null),w.seek(0),w.play({src:b.src,title:r,displayDuration:b.duration,postSlug:f}))},[p,b,r,f,w]);(0,a.useEffect)(()=>{if(p&&(null==b?void 0:b.src))return j((0,m.wL)(b.src)),(0,m.ZD)(e=>{e.src===b.src&&j({currentTime:e.currentTime,duration:e.duration})})},[p,null==b?void 0:b.src]);let P=(0,a.useMemo)(()=>{var e;return function(e){if(!e)return null;let t=e.split(":").map(e=>Number.parseInt(e,10));if(t.some(e=>Number.isNaN(e)))return null;if(3===t.length){let[e,r,n]=t;return 3600*e+60*r+n}if(2===t.length){let[e,r]=t;return 60*e+r}return null}(null!=(e=null==b?void 0:b.duration)?e:null)},[null==b?void 0:b.duration]),S=(0,a.useMemo)(()=>L&&w.duration>0?w.duration:(null==N?void 0:N.duration)?N.duration:null!=P?P:0,[L,w.duration,null==N?void 0:N.duration,P]),T=(0,a.useMemo)(()=>L?w.currentTime:(null==N?void 0:N.currentTime)?N.currentTime:0,[L,w.currentTime,null==N?void 0:N.currentTime]),_=S>0?S:0,M=_?Math.min(T,_):0,F=_?M/_*100:0,I=(0,a.useMemo)(()=>(null==b?void 0:b.duration)?b.duration:_?h(_):null,[null==b?void 0:b.duration,_]),R=h(T),z=(0,a.useCallback)(()=>{if(p&&b){if(!L&&w.isPlaying)return void w.pause();C()}},[p,b,L,w,C]),O=(0,a.useCallback)(e=>{let t=Number(e.target.value);Number.isFinite(t)&&L&&w.seek(t)},[w,L]),D=E?"drop-shadow-[0_0_0.75rem_hsl(var(--accent)_/_0.6)]":"";if((0,a.useEffect)(()=>{if(!p)return void x(null);if(L&&(!y||E)){let e,t=()=>{x({isPlaying:w.isPlaying,isInView:y,currentTime:w.currentTime,progressPercent:w.progressPercent,displayDuration:I,title:r,onTogglePlayback:C}),e=requestAnimationFrame(t)};return t(),()=>cancelAnimationFrame(e)}y||w.isPlaying?x(null):x({isPlaying:!1,isInView:y,currentTime:T,progressPercent:F,displayDuration:I,title:r,onTogglePlayback:z})},[p,L,E,y,I,r,C,z,x,T,F]),!p)return(0,n.jsx)("section",{"aria-label":"Audio version coming soon",className:(0,c.cn)("rounded-3xl border border-border bg-muted/60 p-6 shadow-sm",v),children:(0,n.jsx)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("span",{className:"rounded-full bg-accent/20 p-2 text-accent",children:(0,n.jsx)(i,{className:"h-5 w-5","aria-hidden":!0})}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-muted-foreground",children:"Listen"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Audio narration is on its way. Check back soon to listen to this post."})]})]})})});let q=null!=(t=null==b?void 0:b.title)?t:"Listen to “".concat(r,"”");return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("section",{ref:g,"aria-label":"Listen to this post",className:(0,c.cn)("rounded-3xl border border-border bg-muted/50 p-4 shadow-sm transition-all",E?"ring-1 ring-accent/40":"",v),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("button",{type:"button",onClick:C,"aria-label":E?"Pause narration":"Play narration",className:(0,c.cn)("flex h-11 w-11 shrink-0 items-center justify-center rounded-full bg-accent text-white shadow-sm transition hover:bg-accent/90",E?"shadow-[0_0_1.5rem_hsl(var(--accent)_/_0.45)]":""),children:E?(0,n.jsx)(l.A,{className:(0,c.cn)("h-4 w-4 transition",D),"aria-hidden":!0}):(0,n.jsx)(s.A,{className:(0,c.cn)("h-4 w-4 transition",D),"aria-hidden":!0})}),N&&N.currentTime>5&&(0,n.jsx)("button",{type:"button",onClick:A,"aria-label":"Restart ".concat(r," from beginning"),title:"Start from beginning",className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-full border border-border bg-background text-muted-foreground shadow-sm transition hover:border-accent hover:text-accent hover:bg-accent/5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-accent",children:(0,n.jsx)(o.A,{className:"h-3.5 w-3.5","aria-hidden":!0})}),(0,n.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[(0,n.jsx)("span",{className:"flex items-center gap-2 text-[11px] font-semibold uppercase tracking-[0.3em] text-muted-foreground",children:"Listen"}),(0,n.jsx)("span",{className:"truncate text-sm font-medium text-foreground",children:q})]})]}),(0,n.jsxs)("div",{className:"mt-3 flex items-center gap-2",children:[(0,n.jsx)("span",{className:"shrink-0 text-xs tabular-nums text-muted-foreground",children:R}),(0,n.jsxs)("div",{className:"relative h-6 flex-1 select-none focus-within:outline-none",children:[(0,n.jsx)("div",{className:"absolute left-0 right-0 top-1/2 h-1 -translate-y-1/2 overflow-hidden rounded-full bg-border",children:(0,n.jsx)("div",{className:"h-full rounded-full bg-accent transition-all",style:{width:"".concat(F,"%")}})}),(0,n.jsx)("input",{type:"range",min:0,max:_,step:"any",value:M,onChange:O,"aria-label":"Scrub through the narration","aria-valuetext":"".concat(h(M)," of ").concat(null!=I?I:"--:--"),disabled:!_||!L,className:(0,c.cn)("absolute inset-0 m-0 h-full w-full cursor-pointer appearance-none bg-transparent","disabled:cursor-not-allowed","[&::-webkit-slider-runnable-track]:appearance-none","[&::-moz-range-track]:bg-transparent","[&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-white [&::-webkit-slider-thumb]:shadow-[0_0_0.75rem_hsl(var(--accent)_/_0.25)] [&::-webkit-slider-thumb]:transition","[&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:appearance-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:border-0 [&::-moz-range-thumb]:bg-white [&::-moz-range-thumb]:shadow-[0_0_0.75rem_hsl(var(--accent)_/_0.25)] [&::-moz-range-thumb]:transition")})]}),(0,n.jsx)("span",{className:"shrink-0 text-xs tabular-nums text-muted-foreground",children:null!=I?I:"--:--"})]})]})})}},67333:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=(0,r(71847).A)("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]])},79081:(e,t,r)=>{"use strict";r.d(t,{GlobalAudioProvider:()=>s,o:()=>c,p:()=>o});var n=r(95155),a=r(12115),i=r(14190);let l=(0,a.createContext)(null);function s(e){let{children:t}=e,r=(0,a.useRef)(null),s=(0,a.useRef)(null),o=(0,a.useRef)(0),[c,u]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(0),[b,v]=(0,a.useState)(0);(0,a.useEffect)(()=>{s.current=c},[c]),(0,a.useEffect)(()=>{let e=new Audio;e.preload="metadata",r.current=e;let t=()=>m(!0),n=()=>m(!1),a=()=>m(!1),l=()=>{f(e.currentTime);let t=s.current,r=Date.now();t&&e.currentTime>0&&r-o.current>=2e3&&((0,i.xO)(t.src,e.currentTime,e.duration),o.current=r)},c=()=>{if(Number.isFinite(e.duration)){v(e.duration);let t=s.current;if(t){let r=(0,i.wL)(t.src);r&&r.currentTime>5&&r.currentTime<e.duration-5&&(e.currentTime=r.currentTime,f(r.currentTime))}}},u=e=>{console.warn("Audio playback error:",e),m(!1)};return e.addEventListener("play",t),e.addEventListener("pause",n),e.addEventListener("ended",a),e.addEventListener("timeupdate",l),e.addEventListener("loadedmetadata",c),e.addEventListener("error",u),(0,i.Pg)(),()=>{if(e.removeEventListener("play",t),e.removeEventListener("pause",n),e.removeEventListener("ended",a),e.removeEventListener("timeupdate",l),e.removeEventListener("loadedmetadata",c),e.removeEventListener("error",u),e.currentTime>0&&e.src){let t=e.src;(0,i.xO)(t,e.currentTime,e.duration)}e.pause(),e.src=""}},[]);let p=(0,a.useCallback)(e=>{let t=r.current;if(t)if((null==c?void 0:c.src)!==e.src){t.src=e.src,u(e),f(0),v(0),o.current=0;let r=()=>{t.play().catch(e=>{console.warn("Unable to start audio playback:",e)}),t.removeEventListener("canplay",r)};t.addEventListener("canplay",r,{once:!0}),t.load()}else t.play().catch(e=>{console.warn("Unable to start audio playback:",e)})},[null==c?void 0:c.src]),g=(0,a.useCallback)(()=>{let e=r.current;e&&e.pause()},[]),x=(0,a.useCallback)(()=>{d?g():c&&p(c)},[d,c,g,p]),w=(0,a.useCallback)(e=>{let t=r.current;t&&(t.currentTime=e,f(e))},[]),y=(0,a.useCallback)(e=>(null==c?void 0:c.src)===e,[null==c?void 0:c.src]);return(0,n.jsx)(l.Provider,{value:{currentAudio:c,isPlaying:d,currentTime:h,duration:b,progressPercent:b>0?h/b*100:0,play:p,pause:g,toggle:x,seek:w,isCurrentAudio:y},children:t})}function o(){let e=(0,a.useContext)(l);if(!e)throw Error("useGlobalAudio must be used within GlobalAudioProvider");return e}function c(){return(0,a.useContext)(l)}},92979:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,52619,23)),Promise.resolve().then(r.t.bind(r,81356,23)),Promise.resolve().then(r.bind(r,57990)),Promise.resolve().then(r.bind(r,19558)),Promise.resolve().then(r.bind(r,24121)),Promise.resolve().then(r.bind(r,66078)),Promise.resolve().then(r.bind(r,7553)),Promise.resolve().then(r.bind(r,6023))}},e=>{e.O(0,[2201,1356,8537,8441,1255,7358],()=>e(e.s=92979)),_N_E=e.O()}]);